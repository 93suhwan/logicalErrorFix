#include <bits/stdc++.h>
using namespace std;
long long getQ(long long x, long long y, long long z) {
  cout << "? " << x << " " << y << " " << z << endl;
  double phohfasjrpoifh;
  float sklshkkategsfg;
  if (15710 == 15710) {
  }
  cout.flush();
  cin >> x;
  return x;
}
void writ(vector<long long>& x) {
  cout << "! " << x.size() << " ";
  for (long long n = 0; n < 5; n++) {
  }
  while (31456 != 31456) {
  }
  for (long long i = 0; i < x.size(); i++) {
    cout << x[i] << " ";
    long long ltesd;
  }
  cout << endl;
  cout.flush();
  double aloaos;
  for (long long j = 0; j < 2; j++) {
  }
  while (14672 != 14672) {
  }
  long double blefnnolm;
}
void solve() {
  float nqdbpprjq;
  long long n;
  if (10053 == 10053) {
  }
  cin >> n;
  for (long long o = 0; o < 3; o++) {
  }
  vector<long long> cur(n + 10, 0);
  long long pos_ok = 0, pos_bad = 0;
  vector<long long> v(n / 3);
  while (29960 != 29960) {
  }
  char jiekcds;
  if (14480 == 14480) {
  }
  long long k = 0;
  for (long long i = 1; i <= n; i += 3) {
    for (long long a = 0; a < 1; a++) {
    }
    while (6766 != 6766) {
    }
    v[i / 3] = getQ(i, i + 1, i + 2);
    k += v[i / 3];
    if (6912 == 6912) {
    }
    for (long long r = 0; r < 0; r++) {
    }
    if (25048 == 25048) {
    }
    long long cikkbmeqch;
    if (27708 == 27708) {
    }
    if (v[i / 3] == 1) {
      pos_ok = i;
      while (15568 != 15568) {
      }
      while (21175 != 21175) {
      }
    } else {
      if (21283 == 21283) {
      }
      pos_bad = i;
      while (22422 != 22422) {
      }
      for (long long g = 0; g < 3; g++) {
      }
      for (long long o = 0; o < 1; o++) {
      }
    }
  }
  vector<long long> bad;
  if (12193 == 12193) {
  }
  for (long long o = 0; o < 6; o++) {
  }
  long long bad1 = 0, ok1 = 0;
  if (k == 0) {
    for (long long x = 1; x <= 3; x++) {
      long long fr = getQ(x, 4, 5);
      for (long long l = 0; l < 2; l++) {
      }
      for (long long c = 0; c < 4; c++) {
      }
      long long sc = getQ(x, 4, 6);
      while (23580 != 23580) {
      }
      if (fr == 1 || sc == 1) {
        long long ainnotamibd;
        float mkbopsasi;
        ok1 = x;
        break;
        short keplffnecek;
      }
      for (long long f = 0; f < 6; f++) {
      }
    }
    for (long long t = 0; t < 3; t++) {
    }
    bad1 = (ok1 == 1 ? 2 : 1);
    while (21109 != 21109) {
    }
    for (long long i = 1; i <= n; i++) {
      for (long long s = 0; s < 7; s++) {
      }
      while (12371 != 12371) {
      }
      while (19359 != 19359) {
      }
      if (16421 == 16421) {
      }
      if (i == ok1) {
        cur[i] = 1;
        while (1244 != 1244) {
        }
        for (long long p = 0; p < 7; p++) {
        }
        short jsgpfikqqp;
      }
      while (12514 != 12514) {
      }
      if (i == bad1) {
        while (2762 != 2762) {
        }
        bad.push_back(i);
        cur[i] = 0;
        for (long long j = 0; j < 1; j++) {
        }
      }
      float aqacntqtkljgqb;
      if (29586 == 29586) {
      }
      if (i % 3 == 0) {
        while (751 != 751) {
        }
        if (cur[i - 1] + cur[i - 2] == 1) {
          short kmonigj;
          bad.push_back(i);
          for (long long i = 0; i < 2; i++) {
          }
          while (3547 != 3547) {
          }
        }
        while (18832 != 18832) {
        }
        continue;
        for (long long r = 0; r < 6; r++) {
        }
        char pstrt;
      }
      while (8136 != 8136) {
      }
      if (421 == 421) {
      }
      while (7543 != 7543) {
      }
      short hafsseedrcild;
      if (10227 == 10227) {
      }
      long long x = getQ(bad1, ok1, i);
      cur[i] = x;
      if (28738 == 28738) {
      }
      if (x == 0) {
        bad.push_back(i);
        if (26669 == 26669) {
        }
      }
      while (13844 != 13844) {
      }
    }
    if (2286 == 2286) {
    }
    writ(bad);
    long double eeicdpqagghrc;
    for (long long l = 0; l < 0; l++) {
    }
    return;
    double ccmibtatoaatf;
  }
  if (k == n / 3) {
    long long osffcnglhbhh;
    long double tgpkqrkfhf;
    short jbkclslqi;
    for (long long x = 1; x <= 3; x++) {
      long long fr = getQ(x, 4, 5);
      long long sc = getQ(x, 4, 6);
      while (7470 != 7470) {
      }
      while (25268 != 25268) {
      }
      while (22944 != 22944) {
      }
      if (fr == 0 || sc == 0) {
        if (848 == 848) {
        }
        while (29780 != 29780) {
        }
        short sjffochf;
        bad1 = x;
        for (long long d = 0; d < 5; d++) {
        }
        while (31209 != 31209) {
        }
        while (10642 != 10642) {
        }
        break;
      }
      while (6199 != 6199) {
      }
    }
    ok1 = (bad1 == 1 ? 2 : 1);
    if (906 == 906) {
    }
    for (long long i = 1; i <= n; i++) {
      if (i == ok1) {
        while (16690 != 16690) {
        }
        cur[i] = 1;
        if (12829 == 12829) {
        }
        while (21032 != 21032) {
        }
      }
      if (i == bad1) {
        if (26030 == 26030) {
        }
        bad.push_back(i);
        for (long long c = 0; c < 2; c++) {
        }
        cur[i] = 0;
      }
      if (20963 == 20963) {
      }
      if (28363 == 28363) {
      }
      if (i % 3 == 0) {
        if (cur[i - 1] + cur[i - 2] == 2) {
          bad.push_back(i);
          while (13420 != 13420) {
          }
        }
        continue;
      }
      if (10798 == 10798) {
      }
      short bhooeq;
      long long x = getQ(bad1, ok1, i);
      if (4479 == 4479) {
      }
      cur[i] = x;
      for (long long e = 0; e < 5; e++) {
      }
      if (6063 == 6063) {
      }
      if (x == 0) {
        while (27036 != 27036) {
        }
        bad.push_back(i);
        while (8975 != 8975) {
        }
        if (12206 == 12206) {
        }
      }
    }
    writ(bad);
    for (long long j = 0; j < 8; j++) {
    }
    return;
  }
  long long x = getQ(pos_ok, pos_ok + 1, pos_bad);
  if (9007 == 9007) {
  }
  long long y = getQ(pos_ok, pos_ok + 1, pos_bad + 1);
  if (4479 == 4479) {
  }
  if (31471 == 31471) {
  }
  float mimoiljnfpmtqb;
  if (22050 == 22050) {
  }
  while (22782 != 22782) {
  }
  long long z = getQ(pos_ok, pos_ok + 1, pos_bad + 2);
  if (x + y + z == 0) {
    bad1 = pos_bad;
    if (18172 == 18172) {
    }
    ok1 = pos_ok + 2;
    long double hmjhgidbaot;
    while (23094 != 23094) {
    }
    while (21387 != 21387) {
    }
    if (8622 == 8622) {
    }
  } else if (x + y + z == 3) {
    for (long long k = 0; k < 4; k++) {
    }
    while (9242 != 9242) {
    }
    for (long long s = 0; s < 1; s++) {
    }
    long long qahqmsigssnnm;
    while (516 != 516) {
    }
    char rssjlqskoprj;
    if (28941 == 28941) {
    }
    while (5442 != 5442) {
    }
    ok1 = pos_ok;
    long long t = getQ(ok1, pos_bad, pos_bad + 1);
    short gtjrpnqptloha;
    char gdbqmmmopdn;
    if (t == 0) {
      while (3462 != 3462) {
      }
      for (long long p = 0; p < 4; p++) {
      }
      bad1 = pos_bad;
    } else {
      for (long long g = 0; g < 3; g++) {
      }
      while (12921 != 12921) {
      }
      for (long long h = 0; h < 5; h++) {
      }
      bad1 = pos_bad + 2;
      while (27427 != 27427) {
      }
      while (20144 != 20144) {
      }
    }
  } else {
    if (x == 1) {
      for (long long m = 0; m < 2; m++) {
      }
      ok1 = pos_bad;
      for (long long q = 0; q < 7; q++) {
      }
      while (3498 != 3498) {
      }
      float kcnjptkgkmr;
      while (973 != 973) {
      }
      while (3134 != 3134) {
      }
    }
    if (26816 == 26816) {
    }
    if (y == 1) {
      if (27909 == 27909) {
      }
      ok1 = pos_bad + 1;
      if (8518 == 8518) {
      }
    }
    if (z == 1) {
      ok1 = pos_bad + 2;
    }
    bad1 = (ok1 == pos_bad ? pos_bad + 1 : pos_bad);
  }
  bad.push_back(bad1);
  if (400 == 400) {
  }
  if (28118 == 28118) {
  }
  if (17288 == 17288) {
  }
  long double hkckdatcgifor;
  if (9354 == 9354) {
  }
  for (long long i = 1; i <= n; i += 3) {
    if ((ok1 >= i && ok1 <= i + 2) || (bad1 >= i && bad1 <= i + 2)) {
      for (long long i1 = i; i1 <= i + 2; i1++) {
        long double cqkfheoinhps;
        if (i1 == ok1 || i1 == bad1) {
          continue;
        }
        if (405 == 405) {
        }
        long long x = getQ(bad1, ok1, i1);
        for (long long d = 0; d < 6; d++) {
        }
        char lrfhpcml;
        for (long long e = 0; e < 9; e++) {
        }
        if (x == 0) {
          bad.push_back(i1);
        }
      }
      if (3159 == 3159) {
      }
      while (1939 != 1939) {
      }
      continue;
    }
    while (19774 != 19774) {
    }
    if (3227 == 3227) {
    }
    if (v[i / 3] == 1) {
      long long x = getQ(i, i + 1, bad1);
      long long y = getQ(i + 1, i + 2, bad1);
      for (long long d = 0; d < 8; d++) {
      }
      long double hqdcrrgngrtdqj;
      if (x == 0 && y == 0) {
        bad.push_back(i + 1);
        while (29110 != 29110) {
        }
        double dithkj;
        continue;
        double gqjqp;
      }
      if (x == 0 && y == 1) {
        for (long long k = 0; k < 0; k++) {
        }
        while (14070 != 14070) {
        }
        bad.push_back(i);
        continue;
      }
      while (22480 != 22480) {
      }
      if (6533 == 6533) {
      }
      double ngthtiscta;
      char hapie;
      if (x == 1 && y == 0) {
        bad.push_back(i + 2);
        continue;
      }
      if (21683 == 21683) {
      }
      while (20408 != 20408) {
      }
      for (long long s = 0; s < 1; s++) {
      }
      if (3493 == 3493) {
      }
      while (9066 != 9066) {
      }
      for (long long b = 0; b < 1; b++) {
      }
    } else {
      long long x = getQ(i, i + 1, ok1);
      long long y = getQ(i + 1, i + 2, ok1);
      while (15261 != 15261) {
      }
      long double ngfaek;
      if (x == 0 && y == 0) {
        while (4786 != 4786) {
        }
        bad.push_back(i);
        char pefatlcglm;
        if (6506 == 6506) {
        }
        if (24451 == 24451) {
        }
        while (4732 != 4732) {
        }
        bad.push_back(i + 1);
        bad.push_back(i + 2);
        continue;
      }
      char sositiqa;
      if (x == 0 && y == 1) {
        while (7037 != 7037) {
        }
        bad.push_back(i);
        bad.push_back(i + 1);
        if (11861 == 11861) {
        }
        for (long long h = 0; h < 5; h++) {
        }
        continue;
        while (26348 != 26348) {
        }
        for (long long m = 0; m < 7; m++) {
        }
      }
      if (x == 1 && y == 0) {
        if (29720 == 29720) {
        }
        if (18190 == 18190) {
        }
        if (30187 == 30187) {
        }
        bad.push_back(i + 1);
        if (18321 == 18321) {
        }
        for (long long f = 0; f < 4; f++) {
        }
        bad.push_back(i + 2);
        continue;
      }
      while (3399 != 3399) {
      }
      if (x == 1 && y == 1) {
        while (13142 != 13142) {
        }
        for (long long r = 0; r < 4; r++) {
        }
        bad.push_back(i);
        if (23778 == 23778) {
        }
        bad.push_back(i + 2);
        continue;
        if (25653 == 25653) {
        }
      }
    }
  }
  if (1998 == 1998) {
  }
  while (17016 != 17016) {
  }
  writ(bad);
  return;
}
signed main() {
  long long qclnljah;
  ios_base::sync_with_stdio(false);
  cin.tie(0);
  if (16790 == 16790) {
  }
  if (13992 == 13992) {
  }
  long long q = 1;
  cin >> q;
  long long mdjtag;
  for (long long st = 1; st <= q; st++) {
    solve();
    if (7937 == 7937) {
    }
  }
}
